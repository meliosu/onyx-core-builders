<div class="bg-white shadow rounded-lg">
    <!-- Area Info -->
    <div class="p-6 border-b">
        <div class="flex justify-between">
            <div>
                <h2 class="text-xl font-semibold mb-2">{{ name }}</h2>
                <div class="text-sm text-gray-600">
                    <p class="mb-1">
                        <span class="font-medium">Department:</span> 
                        <a href="/departments/{{ department_id }}" class="text-custom-primary hover:underline">
                            {{ department_name }}
                        </a>
                    </p>
                    <p>
                        <span class="font-medium">Supervisor:</span> 
                        {% if let Some(supervisor_name) = supervisor_name %}
                            {% if let Some(supervisor_id) = supervisor_id %}
                                <a href="/technical-personnel/{{ supervisor_id }}" class="text-custom-primary hover:underline">
                                    {{ supervisor_name }}
                                </a>
                            {% else %}
                                {{ supervisor_name }}
                            {% endif %}
                        {% else %}
                            <span class="text-gray-400">Not assigned</span>
                        {% endif %}
                    </p>
                </div>
            </div>
            <div class="flex space-x-2">
                <a href="/areas/{{ id }}/edit" 
                   class="bg-custom-primary text-white px-4 py-2 rounded font-medium hover:bg-opacity-90">
                    <i class="fas fa-edit mr-2"></i> Edit
                </a>
                <button hx-delete="/api/areas/{{ id }}"
                        hx-confirm="Are you sure you want to delete this area? This action cannot be undone."
                        hx-target="#notification-container"
                        class="bg-error text-white px-4 py-2 rounded font-medium hover:bg-opacity-90">
                    <i class="fas fa-trash-alt mr-2"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Tabs navigation -->
    <div class="border-b">
        <div class="flex">
            <button class="px-6 py-3 border-r {% if tab == AreaTab::Sites %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/areas/{{ id }}"
                    hx-target="#area-content"
                    hx-vals='{"tab": "sites"}'
                    hx-push-url="false">
                <i class="fas fa-hard-hat mr-2"></i> Sites
            </button>
            <button class="px-6 py-3 {% if tab == AreaTab::Personnel %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/areas/{{ id }}"
                    hx-target="#area-content"
                    hx-vals='{"tab": "personnel"}'
                    hx-push-url="false">
                <i class="fas fa-user-tie mr-2"></i> Personnel
            </button>
        </div>
    </div>

    <!-- Tab content -->
    <div class="p-6">
        {% match tab %}
            {% when AreaTab::Sites %}
                <div id="sites-content"
                     hx-get="/api/areas/{{ id }}/sites"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
            {% when AreaTab::Personnel %}
                <div id="personnel-content"
                     hx-get="/api/areas/{{ id }}/personnel"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
        {% endmatch %}
    </div>
</div>

<!-- Notification container -->
<div id="notification-container"></div>
