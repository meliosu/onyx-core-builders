<div class="bg-white shadow rounded-lg">
    <!-- Department Info -->
    <div class="p-6 border-b">
        <div class="flex justify-between">
            <div>
                <h2 class="text-xl font-semibold mb-2">{{ name }}</h2>
                <div class="text-sm text-gray-600">
                    <span class="font-medium">Supervisor:</span> 
                    {% if let Some(supervisor_name) = supervisor_name %}
                        {{ supervisor_name }}
                    {% else %}
                        <span class="text-gray-400">Not assigned</span>
                    {% endif %}
                </div>
            </div>
            <div class="flex space-x-2">
                <a href="/departments/{{ id }}/edit" 
                   class="bg-primary text-white px-4 py-2 rounded font-medium hover:bg-opacity-90">
                    <i class="fas fa-edit mr-2"></i> Edit
                </a>
                <button hx-delete="/api/departments/{{ id }}"
                        hx-confirm="Are you sure you want to delete this department? This action cannot be undone."
                        hx-target="#notification-container"
                        class="bg-error text-white px-4 py-2 rounded font-medium hover:bg-opacity-90">
                    <i class="fas fa-trash-alt mr-2"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Tabs navigation -->
    <div class="border-b">
        <div class="flex">
            <button class="px-6 py-3 border-r {% if tab == DepartmentTab::Areas %}text-secondary border-b-2 border-b-secondary -mb-px{% endif %}"
                    hx-get="/api/departments/{{ id }}"
                    hx-target="#department-content"
                    hx-vals='{"tab": "areas"}'
                    hx-push-url="false">
                <i class="fas fa-map-marked-alt mr-2"></i> Areas
            </button>
            <button class="px-6 py-3 border-r {% if tab == DepartmentTab::Equipment %}text-secondary border-b-2 border-b-secondary -mb-px{% endif %}"
                    hx-get="/api/departments/{{ id }}"
                    hx-target="#department-content"
                    hx-vals='{"tab": "equipment"}'
                    hx-push-url="false">
                <i class="fas fa-truck mr-2"></i> Equipment
            </button>
            <button class="px-6 py-3 border-r {% if tab == DepartmentTab::Sites %}text-secondary border-b-2 border-b-secondary -mb-px{% endif %}"
                    hx-get="/api/departments/{{ id }}"
                    hx-target="#department-content"
                    hx-vals='{"tab": "sites"}'
                    hx-push-url="false">
                <i class="fas fa-hard-hat mr-2"></i> Sites
            </button>
            <button class="px-6 py-3 {% if tab == DepartmentTab::Personnel %}text-secondary border-b-2 border-b-secondary -mb-px{% endif %}"
                    hx-get="/api/departments/{{ id }}"
                    hx-target="#department-content"
                    hx-vals='{"tab": "personnel"}'
                    hx-push-url="false">
                <i class="fas fa-user-tie mr-2"></i> Personnel
            </button>
        </div>
    </div>

    <!-- Tab content -->
    <div class="p-6">
        {% match tab %}
            {% when DepartmentTab::Areas %}
                <div id="areas-content"
                     hx-get="/api/departments/{{ id }}/areas"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-secondary"></div>
                    </div>
                </div>
            {% when DepartmentTab::Equipment %}
                <div id="equipment-content"
                     hx-get="/api/departments/{{ id }}/equipment"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-secondary"></div>
                    </div>
                </div>
            {% when DepartmentTab::Sites %}
                <div id="sites-content"
                     hx-get="/api/departments/{{ id }}/sites"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-secondary"></div>
                    </div>
                </div>
            {% when DepartmentTab::Personnel %}
                <div id="personnel-content"
                     hx-get="/api/departments/{{ id }}/personnel"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-secondary"></div>
                    </div>
                </div>
        {% endmatch %}
    </div>
</div>

<!-- Notification container -->
<div id="notification-container"></div>
