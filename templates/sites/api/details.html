<div class="bg-white shadow rounded-lg">
    <!-- Site Info -->
    <div class="p-6 border-b">
        <div class="flex justify-between">
            <div>
                <h2 class="text-xl font-semibold mb-2">{{ name }}</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm text-gray-600 mb-1">
                            <span class="font-medium">Type:</span> 
                            {% match type_ %}
                                {% when SiteType::PowerPlant %}
                                    <span class="inline-flex items-center">
                                        <i class="fas fa-bolt text-yellow-500 mr-1"></i> Power Plant
                                    </span>
                                {% when SiteType::Road %}
                                    <span class="inline-flex items-center">
                                        <i class="fas fa-road mr-1"></i> Road
                                    </span>
                                {% when SiteType::Housing %}
                                    <span class="inline-flex items-center">
                                        <i class="fas fa-home mr-1"></i> Housing
                                    </span>
                                {% when SiteType::Bridge %}
                                    <span class="inline-flex items-center">
                                        <i class="fas fa-archway mr-1"></i> Bridge
                                    </span>
                                {% when SiteType::Park %}
                                    <span class="inline-flex items-center">
                                        <i class="fas fa-tree mr-1"></i> Park
                                    </span>
                            {% endmatch %}
                        </p>
                        <p class="text-sm text-gray-600 mb-1">
                            <span class="font-medium">Area:</span> 
                            <a href="/areas/{{ area_id }}" class="text-custom-primary hover:underline">{{ area_name }}</a>
                        </p>
                        <p class="text-sm text-gray-600 mb-1">
                            <span class="font-medium">Client:</span> 
                            <a href="/clients/{{ client_id }}" class="text-custom-primary hover:underline">{{ client_name }}</a>
                        </p>
                    </div>
                    <div>
                        <p class="text-sm text-gray-600 mb-1">
                            <span class="font-medium">Location:</span> {{ location }}
                        </p>
                        <p class="text-sm text-gray-600 mb-1">
                            <span class="font-medium">Risk Level:</span> 
                            {% match risk_level %}
                                {% when RiskLevel::Low %}
                                    <span class="inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20">
                                        Low
                                    </span>
                                {% when RiskLevel::Meidum %}
                                    <span class="inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-700 ring-1 ring-inset ring-yellow-600/20">
                                        Medium
                                    </span>
                                {% when RiskLevel::High %}
                                    <span class="inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20">
                                        High
                                    </span>
                            {% endmatch %}
                        </p>
                        {% if let Some(desc) = description %}
                        <p class="text-sm text-gray-600 mb-1">
                            <span class="font-medium">Description:</span> {{ desc }}
                        </p>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Type-specific fields -->
                <div class="mt-4 pt-4 border-t">
                    <h3 class="text-md font-semibold mb-2">
                        {% match type_ %}
                            {% when SiteType::PowerPlant %}Power Plant Details
                            {% when SiteType::Road %}Road Details
                            {% when SiteType::Housing %}Housing Details
                            {% when SiteType::Bridge %}Bridge Details
                            {% when SiteType::Park %}Park Details
                        {% endmatch %}
                    </h3>
                    
                    {% match type_fields %}
                        {% when SiteFields::PowerPlant(fields) %}
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Energy Output:</span> {{ fields.energy_output }} MW
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Energy Source:</span> {{ fields.energy_source }}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Grid Connected:</span> 
                                    {% if fields.is_grid_connected %}Yes{% else %}No{% endif %}
                                </p>
                            </div>
                        {% when SiteFields::Road(fields) %}
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Length:</span> {{ fields.length }} m
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Lanes:</span> {{ fields.lanes }}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Surface:</span> {{ fields.surface }}
                                </p>
                            </div>
                        {% when SiteFields::Housing(fields) %}
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Floors:</span> {{ fields.number_of_floors }}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Entrances:</span> {{ fields.number_of_entrances }}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Type:</span> {{ fields.type_ }}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Energy Efficiency:</span> {{ fields.energy_efficiency }}
                                </p>
                            </div>
                        {% when SiteFields::Bridge(fields) %}
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Length:</span> {{ fields.length }} m
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Road Material:</span> {{ fields.road_material }}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Maximum Load:</span> {{ fields.max_load }} tons
                                </p>
                            </div>
                        {% when SiteFields::Park(fields) %}
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Area:</span> {{ fields.area }} kmÂ²
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Playground:</span> 
                                    {% if fields.has_playground %}Yes{% else %}No{% endif %}
                                </p>
                                <p class="text-sm text-gray-600">
                                    <span class="font-medium">Lighting:</span> 
                                    {% if fields.has_lighting %}Yes{% else %}No{% endif %}
                                </p>
                            </div>
                    {% endmatch %}
                </div>
            </div>
            <div class="flex space-x-2">
                <a href="/sites/{{ id }}/edit" 
                   class="bg-custom-primary text-white px-4 py-2 rounded font-medium hover:bg-opacity-90">
                    <i class="fas fa-edit mr-2"></i> Edit
                </a>
                <button hx-delete="/api/sites/{{ id }}"
                        hx-confirm="Are you sure you want to delete this site? This action cannot be undone."
                        hx-target="#notification-container"
                        class="bg-error text-white px-4 py-2 rounded font-medium hover:bg-opacity-90">
                    <i class="fas fa-trash-alt mr-2"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Tabs navigation -->
    <div class="border-b">
        <div class="flex overflow-x-auto">
            <button class="px-6 py-3 border-r whitespace-nowrap {% if tab == SiteTab::Schedule %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/sites/{{ id }}"
                    hx-target="#site-content"
                    hx-vals='{"tab": "schedule"}'
                    hx-push-url="false">
                <i class="fas fa-calendar-alt mr-2"></i> Schedule
            </button>
            <button class="px-6 py-3 border-r whitespace-nowrap {% if tab == SiteTab::Materials %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/sites/{{ id }}"
                    hx-target="#site-content"
                    hx-vals='{"tab": "materials"}'
                    hx-push-url="false">
                <i class="fas fa-boxes mr-2"></i> Materials
            </button>
            <button class="px-6 py-3 border-r whitespace-nowrap {% if tab == SiteTab::Equipment %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/sites/{{ id }}"
                    hx-target="#site-content"
                    hx-vals='{"tab": "equipment"}'
                    hx-push-url="false">
                <i class="fas fa-truck mr-2"></i> Equipment
            </button>
            <button class="px-6 py-3 border-r whitespace-nowrap {% if tab == SiteTab::Brigades %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/sites/{{ id }}"
                    hx-target="#site-content"
                    hx-vals='{"tab": "brigades"}'
                    hx-push-url="false">
                <i class="fas fa-people-group mr-2"></i> Brigades
            </button>
            <button class="px-6 py-3 whitespace-nowrap {% if tab == SiteTab::Reports %}text-custom-secondary border-b-2 border-b-custom-secondary -mb-px{% endif %}"
                    hx-get="/api/sites/{{ id }}"
                    hx-target="#site-content"
                    hx-vals='{"tab": "reports"}'
                    hx-push-url="false">
                <i class="fas fa-file-alt mr-2"></i> Reports
            </button>
        </div>
    </div>

    <!-- Tab content -->
    <div class="p-6">
        {% match tab %}
            {% when SiteTab::Schedule %}
                <div id="schedule-content"
                     hx-get="/api/sites/{{ id }}/schedule"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
            {% when SiteTab::Materials %}
                <div id="materials-content"
                     hx-get="/api/sites/{{ id }}/materials"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
            {% when SiteTab::Equipment %}
                <div id="equipment-content"
                     hx-get="/api/sites/{{ id }}/equipment"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
            {% when SiteTab::Brigades %}
                <div id="brigades-content"
                     hx-get="/api/sites/{{ id }}/brigades"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
            {% when SiteTab::Reports %}
                <div id="reports-content"
                     hx-get="/api/sites/{{ id }}/reports"
                     hx-trigger="load"
                     hx-vals='{"page_number": 1, "page_size": 10}'>
                    <div class="flex justify-center items-center h-40">
                        <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-custom-secondary"></div>
                    </div>
                </div>
        {% endmatch %}
    </div>
</div>
